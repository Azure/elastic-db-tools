<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <Description>This client library allows ADO.NET developers to create applications that implement and use the pattern known as database sharding in Azure SQL Database. Sharding is a scale-out strategy that spreads data across a number of independent databases. The library includes APIs for creating and managing shard maps, routing SQL operations to the appropriate shard, and performing queries that cross many shards. To learn more about elastic database tools, check out http://azure.microsoft.com/en-us/documentation/articles/sql-database-elastic-scale-documentation-map/.</Description>
    <Copyright>Copyright � Microsoft Corporation. All rights reserved.</Copyright>
    <AssemblyTitle>Microsoft Azure SQL Database: Elastic Database Client Library</AssemblyTitle>
    <NeutralLanguage>en-US</NeutralLanguage>
    <VersionPrefix>1.3.2</VersionPrefix>
    <Authors>Microsoft</Authors>
    <TargetFrameworks>netstandard1.6;net451</TargetFrameworks>
    <DefineConstants>$(DefineConstants);STANDALONE_BUILD</DefineConstants>
    <AssemblyName>Microsoft.Azure.SqlDatabase.ElasticScale.Client</AssemblyName>
    <PackageId>ElasticScale.Client</PackageId>
    <PackageTags>Microsoft;Elastic;Scale;Azure;SQL;DB;Database;Shard;Sharding;Management;Query;azureofficial</PackageTags>
    <PackageReleaseNotes>This refresh fixes a bug related to SqlConnectionStringBuilder exception in library. No API changes have been introduced.

In 1.3.2:
- Bugfix to handle SqlConnectionStringBuilder properties correctly when running with 4.5.2 or earlier version of .NET.

In 1.3.1:
- Bugfix to handle exceptions in performance counter creation code.

In 1.3.0:
- Introduction of performance counters for caching and Data Dependent Routing (DDR) scenarios in Elastic Database Client Library.
- New API addition for creation of performance category and counters: ShardMapManagerFactory.CreatePerformanceCategoryAndCounters();. Please check documentation map for more information on performance counters at https://azure.microsoft.com/en-us/documentation/learning-paths/sql-database-elastic-scale/. 
- Active Directory authentication support.
- Bug fix to explicitly release the lock at connection close. This will allow addition of multiple mappings at the same time faster.
- ReadAsync support for MultiShardDataReader

In 1.2.0:
- Fixed a bug in SchemaInfo serialization

In 1.1.0:
- Responsiveness of cancellation in Multi-Shard Query has been improved.
- This assembly can now loaded from a byte stream instead of from a file. This can be a useful way to load the assembly in SQL CLR, using syntax CREATE ASSEMBLY {assembly name} FROM {bytes}.</PackageReleaseNotes>
    <PackageIconUrl>http://go.microsoft.com/fwlink/?LinkID=288890</PackageIconUrl>
    <PackageProjectUrl>http://go.microsoft.com/?linkid=9862897</PackageProjectUrl>
    <PackageLicenseUrl>http://go.microsoft.com/?linkid=9862941</PackageLicenseUrl>
    <PackageRequireLicenseAcceptance>true</PackageRequireLicenseAcceptance>
    <RepositoryType>git</RepositoryType>
    <RepositoryUrl>https://github.com/Azure/elastic-db-tools</RepositoryUrl>
    <RuntimeIdentifiers>win;unix</RuntimeIdentifiers>
    <PackageTargetFallback Condition=" '$(TargetFramework)' == 'netstandard1.6' ">$(PackageTargetFallback);dnxcore50;dotnet5.6;portable-net45+win8</PackageTargetFallback>
    <NetStandardImplicitPackageVersion Condition=" '$(TargetFramework)' == 'netstandard1.6' ">1.6.0</NetStandardImplicitPackageVersion>
    <GenerateAssemblyTitleAttribute>false</GenerateAssemblyTitleAttribute>
    <GenerateAssemblyDescriptionAttribute>false</GenerateAssemblyDescriptionAttribute>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="System.Data.Common" Version="4.1.0" />
  </ItemGroup>

  <ItemGroup Condition=" '$(TargetFramework)' == 'netstandard1.6' ">
    <PackageReference Include="System.Diagnostics.TraceSource" Version="4.0.0" />
    <PackageReference Include="System.Reflection.TypeExtensions" Version="4.1.0" />
    <PackageReference Include="System.Runtime.Serialization.Formatters" Version="4.0.0-rc3-24212-01" />
    <PackageReference Include="System.ComponentModel.Primitives" Version="4.1.0" />
    <PackageReference Include="System.Data.SqlClient" Version="4.1.0" />
    <PackageReference Include="System.Diagnostics.Contracts" Version="4.0.1" />
    <PackageReference Include="System.Resources.Reader" Version="4.0.0" />
    <PackageReference Include="System.Resources.ResourceManager" Version="4.0.1" />
    <PackageReference Include="System.Runtime.Serialization.Xml" Version="4.1.1" />
    <PackageReference Include="System.Security.Principal" Version="4.0.1" />
    <PackageReference Include="System.Xml.ReaderWriter" Version="4.0.11" />
  </ItemGroup>

  <PropertyGroup Condition=" '$(TargetFramework)' == 'netstandard1.6' ">
    <DefineConstants>$(DefineConstants);NETSTANDARD16</DefineConstants>
  </PropertyGroup>

  <Target Name="PostcompileScript" AfterTargets="Build" Condition=" '$(IsCrossTargetingBuild)' != 'true' ">
    <Exec Command="dotnet pack --no-build --configuration $(Configuration)" />
  </Target>

  <ItemGroup Condition=" '$(TargetFramework)' == 'net451' ">
    <Reference Include="System.Data" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Xml.ReaderWriter" />
    <Reference Include="System" />
    <Reference Include="Microsoft.CSharp" />
  </ItemGroup>

</Project>
